<!-- templates/mini_fb/show_profile.html -->
<!-- A template to show a profile page for one user inheriting from base.html-->

{% extends 'mini_fb/base.html' %}

{% block content %}
<h2>{{ profile.first_name }} {{ profile.last_name }}'s Profile</h2>
<img src="{{ profile.profile_image_url }}" alt="Profile Image" width="200">
<p>City: {{ profile.city }}</p>

<h3>Status Messages</h3>
<ul>
    {% for status in status_messages %}
        <li>
            <strong>{{ status.timestamp }}</strong>: {{ status.message }}
            <!-- update or delete the status message -->
            <a href="{% url 'update_status' status.pk %}">Update</a>
            
            <a href="{% url 'delete_status' status.pk %}">Delete</a>
            <!-- Loop through images associated with this status message -->
            {% for img in status.images %}
                <div>
                    <img src="{{ img.image.url }}" alt="Image for {{ status.message }} message" width="200">
                </div>
            {% endfor %}
        </li>
    {% empty %}
        <p>No status messages available.</p>
    {% endfor %}
</ul>


<a href="{% url 'create_status' profile.pk %}">Post a Status Message</a>
<br><br>
<a href="{% url 'update_profile' profile.pk %}">Update Profile</a> 
<br><br>
<a href="{% url 'show_all_profiles' %}">Back to All Profiles</a>
{% endblock %}
