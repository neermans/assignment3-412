{% extends 'project/base.html' %}

{% block content %}
<h1>{{ profile.name }}'s Profile</h1>
<img src="{{ profile.image }}" alt="{{ profile.name }}" width="150" height="150">
<p><strong>Dance Company:</strong> {{ profile.dance_company }}</p>
<p><strong>Email Contact:</strong> <a href="mailto:{{ profile.email_contact }}">{{ profile.email_contact }}</a></p>


<!-- Add Private Messaging Link -->
{% if user.is_authenticated and user != profile.recruiterUser %}
    <a href="{% url 'send_message' profile.recruiterUser.pk %}" class="btn btn-primary">Send a Private Message</a>
{% else %}
    {% if user == profile.recruiterUser %}
        <p>This is your profile. You cannot send messages to yourself.</p>
    {% else %}
        <p>You must <a href="{% url 'login' %}">log in</a> to send messages.</p>
    {% endif %}
{% endif %}

<h2>Dance Posts</h2>
<ul>
    {% for post in dance_posts %}
        <li>
            <strong>{{ post.description }}</strong>
            {% if post.video %}
                <a href="{{ post.video.url }}">View Video</a>
            {% endif %}
            {% if post.cut_music %}
                <a href="{{ post.cut_music.url }}">View Music</a>
            {% endif %}
            {% if is_own_profile %}
                <a href="{% url 'edit_dance_post' post.pk %}" class="btn btn-primary">Edit</a>
            {% endif %}
        </li>
    {% empty %}
        <li>No dance posts available.</li>
    {% endfor %}
</ul>

<h2>Comment Board Posts</h2>
<ul>
    {% for post in comment_board_posts %}
        <li>
            <strong>{{ post.get_post_type_display }}</strong>: {{ post.content }}
            {% if is_own_profile %}
                <a href="{% url 'edit_comment_post' post.pk %}" class="btn btn-primary">Edit</a>
            {% endif %}
        </li>
    {% empty %}
        <li>No comment board posts available.</li>
    {% endfor %}
</ul>

<!-- update profile if you are the one logged in -->

{% if request.user == profile.dancerUser %}
    <a href="{% url 'edit_dancer_profile' profile.pk %}" class="btn btn-primary">Edit Profile</a>
{% elif request.user == profile.recruiterUser %}
    <a href="{% url 'edit_recruiter_profile' profile.pk %}" class="btn btn-primary">Edit Profile</a>
{% endif %}

<a href="{% url 'profile_list' %}" class="btn btn-secondary">Back to All Profiles</a>

<a href="{% url 'blog_home' %}">Back to Blog Home</a>

{% endblock %}
