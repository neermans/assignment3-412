<!-- voter_analytics/templates/voter_analytics/graphs.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Voter Data Graphs</title>
</head>
<body>
    <h1>Voter Data Graphs</h1>

    <!-- Filter Form -->
    <form method="get">
        <label for="party_affiliation">Party Affiliation:</label>
        <select name="party_affiliation" id="party_affiliation">
            <option value="">Any</option>
            {% for code, name in party_affiliations %}
                <option value="{{ code }}" {% if request.GET.party_affiliation == code %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
        </select>

        <label for="min_dob">Minimum Date of Birth:</label>
        <select name="min_dob" id="min_dob">
            <option value="">Any</option>
            {% for year in years %}
                <option value="{{ year }}-01-01" {% if request.GET.min_dob == year|stringformat:"-01-01" %}selected{% endif %}>{{ year }}</option>
            {% endfor %}
        </select>

        <label for="max_dob">Maximum Date of Birth:</label>
        <select name="max_dob" id="max_dob">
            <option value="">Any</option>
            {% for year in years %}
                <option value="{{ year }}-12-31" {% if request.GET.max_dob == year|stringformat:"-12-31" %}selected{% endif %}>{{ year }}</option>
            {% endfor %}
        </select>

        <label for="voter_score">Voter Score:</label>
        <select name="voter_score" id="voter_score">
            <option value="">Any</option>
            {% for score in voter_scores %}
                <option value="{{ score }}" {% if request.GET.voter_score == score|stringformat:"d" %}selected{% endif %}>{{ score }}</option>
            {% endfor %}
        </select>

        <!-- Checkboxes for specific election participation -->
        <label><input type="checkbox" name="v20state" {% if request.GET.v20state %}checked{% endif %}> Voted in 2020 State</label>
        <label><input type="checkbox" name="v21town" {% if request.GET.v21town %}checked{% endif %}> Voted in 2021 Town</label>
        <label><input type="checkbox" name="v21primary" {% if request.GET.v21primary %}checked{% endif %}> Voted in 2021 Primary</label>
        <label><input type="checkbox" name="v22general" {% if request.GET.v22general %}checked{% endif %}> Voted in 2022 General</label>
        <label><input type="checkbox" name="v23town" {% if request.GET.v23town %}checked{% endif %}> Voted in 2023 Town</label>

        <button type="submit">Filter</button>
    </form>

    <!-- Graphs -->
    <div>
        <h2>Distribution of Voters by Year of Birth</h2>
        {{ birth_year_chart|safe }}
    </div>

    <div>
        <h2>Distribution of Voters by Party Affiliation</h2>
        {{ party_affiliation_chart|safe }}
    </div>

    <div>
        <h2>Distribution of Voter Participation in Each Election</h2>
        {{ election_participation_chart|safe }}
    </div>

</body>
</html>
